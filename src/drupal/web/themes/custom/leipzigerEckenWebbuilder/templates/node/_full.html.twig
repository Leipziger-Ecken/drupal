{% set webbuilder_id = elements['#webbuilder'].id() | default(null) %}
{% if webbuilder_id %}
  {% set color_primary = drupal_field('field_color_primary', 'node', webbuilder_id)[0]['#markup'] | default(color_primary) %}
  {% set color_primary_hsl = color_hex_to_hsl(color_primary) %}
  {% set fonts = drupal_field('field_fonts', 'node', webbuilder_id)[0]['#markup'] | split('+', 2) %}
  {% set font_heading = fonts[0] %}
  {% set font_body = fonts[1] %}
  {% set layout = drupal_field('field_layout', 'node', webbuilder_id)[0]['#markup'] | default('default') %}
  {% set logo = drupal_field('field_logo', 'node', webbuilder_id)[0]['#item'] | default(logo) %}
  {% set logo_url = logo|file_url %}
{% endif %}
{% set node_type = node.getType() %}
{% set image = content.field_main_image[0] %}
{% set url = webbuilder_url(webbuilder_id(), 'le_webbuilder.node.' ~ node_type, {
  node: node.id(),
}) %}

{% extends '@leipzigerEckenWebbuilder/layouts/layout--' ~ layout ~'.html.twig' %}

{% block content %}
<article>
  {% if image %}
  <figure class="relative mx-auto w-full lg:max-w-md mb-8">
    <a href="{{ url }}"
      class="relative block w-full rounded-lg shadow-lg bg-white overflow-hidden focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
      {{ include('@leipzigerEckenWebbuilder/partials/components/media_image.html.twig', {
      class: 'w-full h-48 sm:h-64 object-cover',
      image: image,
      width: 610,
      image_style: 'webbuilder_teaser',
      }) }}
    </a>
  </figure>
  {% endif %}
  <div>
    {{ include('@leipzigerEckenWebbuilder/partials/components/badge.html.twig', {
    type: 'primary',
    label: node_type == 'le_event' ? content.field_le_event_occurrences : content.published_at|default(node.created_at),
    }) }}
  </div>
  <h2 class="text-xl font-semibold text-gray-900">
    {{ label }}
  </h2>
  <div class="mt-3 text-base text-gray-500 prose">
    {% if node_type == 'le_event' %}
    {{ content.field_le_event_beschreibung }}
    {% else %}
    {{ content.field_body | default(content.field_description) | default(content.body) }}
    {% endif %}
  </div>
</article>
{% endblock %}